<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Click Countryballs: Ultimate</title>
    <style>
        :root { --panel: #1e293b; --bg: #020617; --gold: #fbbf24; --green: #22c55e; }
        body {
            margin: 0; display: flex; height: 100vh;
            background: var(--bg); color: white;
            font-family: 'Segoe UI', sans-serif; overflow: hidden; user-select: none;
        }

        /* Secret Baby Mode Button */
        #secret-baby-trigger {
            position: absolute; top: 10px; right: 10px;
            width: 20px; height: 20px; background: transparent;
            cursor: pointer; z-index: 1000;
        }

        /* Sidebar */
        .sidebar {
            width: 320px; background: rgba(0,0,0,0.8);
            border-right: 3px solid #334155; padding: 20px;
            display: flex; flex-direction: column; gap: 15px; z-index: 10;
        }
        .main-game {
            flex-grow: 1; display: flex; flex-direction: column;
            align-items: center; justify-content: center; position: relative;
        }

        /* The Ball */
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
        .ball-container {
            position: relative; width: 300px; height: 300px;
            animation: float 3s ease-in-out infinite;
            transition: transform 0.05s; cursor: pointer;
        }
        .ball-container:active { transform: scale(0.85); animation: none; }
        #country-flag {
            width: 100%; height: 100%; border-radius: 50%;
            border: 8px solid #fff; object-fit: cover;
            box-shadow: 0 0 60px rgba(0,0,0,0.9);
        }

        /* Eyes */
        .eyes { position: absolute; top: 35%; width: 100%; display: flex; justify-content: center; gap: 50px; }
        .eye { width: 45px; height: 55px; background: white; border-radius: 50%; border: 5px solid #000; }

        /* UI */
        .card { background: var(--panel); padding: 15px; border-radius: 12px; border: 1px solid #475569; }
        button {
            width: 100%; padding: 12px; border-radius: 8px; border: none;
            background: var(--green); color: white; font-weight: bold; cursor: pointer; margin-top: 8px;
        }
        button:disabled { background: #475569; opacity: 0.5; }
        
        .about-section { font-size: 0.85rem; color: #94a3b8; border-top: 1px solid #334155; padding-top: 10px; }
        .score-area { text-align: center; margin-bottom: 30px; }
        .popup { position: absolute; color: var(--gold); font-weight: 900; pointer-events: none; animation: popGo 0.6s forwards; font-size: 2rem; z-index: 500;}
        @keyframes popGo { to { opacity: 0; transform: translateY(-150px) scale(2); } }

        /* Baby Version Overlay */
        #baby-version {
            display: none; position: fixed; inset: 0; background: #ffcfdf; 
            z-index: 2000; flex-direction: column; align-items: center; justify-content: center; color: #ff4d94;
        }
    </style>
</head>
<body>

    <div id="secret-baby-trigger" onclick="toggleBabyMode()"></div>

    <div id="baby-version">
        <h1>BABY MODE üçº</h1>
        <p>So Gooey! Much Fun!</p>
        <div class="ball-container" style="width: 200px; height: 200px;">
            <img src="https://flagpedia.net/data/flags/w580/my.png" style="width:100%; border-radius:50%; border:10px solid white;">
            <div class="eyes"><div class="eye"></div><div class="eye"></div></div>
        </div>
        <button onclick="toggleBabyMode()" style="width: 200px; background: #ff4d94; margin-top: 20px;">Exit Baby Mode</button>
    </div>

    <div class="sidebar">
        <h2 style="margin:0; color:var(--gold)">Market</h2>
        
        <div class="card">
            <strong>Infinite Strength</strong>
            <button id="buy-pwr">Upgrade ($<span id="pwr-cost">15</span>)</button>
        </div>

        <div class="card">
            <strong>Auto-Laborers (+10)</strong>
            <button id="buy-auto">Hire ($<span id="auto-cost">100</span>)</button>
        </div>

        <div class="about-section">
            <strong>About</strong><br>
            Dalton created this game hes turning 6 or 7 years old.
        </div>
        
        <div style="margin-top:auto">
            <button onclick="resetAll()" style="background: #ef4444;">Reset Game</button>
        </div>
    </div>

    <div class="main-game">
        <div class="score-area">
            <div id="location-name" style="font-size: 1.5rem; letter-spacing: 5px; color: #64748b;">MALAYSIA</div>
            <div style="font-size: 5rem; font-weight: 900; color: var(--gold);" id="score-val">0</div>
            <div style="color: #64748b;">Countrybux</div>
        </div>

        <div class="ball-container" id="ball">
            <img id="country-flag" src="https://flagpedia.net/data/flags/w580/my.png">
            <div class="eyes">
                <div class="eye"></div>
                <div class="eye"></div>
            </div>
        </div>
    </div>

    <script>
        const sfx_click = new Audio('https://www.soundjay.com/buttons/sounds/button-37a.mp3');
        
        let data = { score: 0, power: 1, pwrCost: 15, auto: 0, autoCost: 100 };
        
        // Massive Country List
        const codes = ["my", "gb", "ca", "au", "de", "fr", "it", "jp", "cn", "ru", "br", "mx", "es", "pl", "ua", "tr", "kr", "se", "no", "fi", "dk", "id", "th", "vn", "sg", "ph", "in", "eg", "za", "ar", "cl", "pe", "co"];

        function save() { localStorage.setItem(`dalton_final_save`, JSON.stringify(data)); }
        function load() {
            const saved = localStorage.getItem(`dalton_final_save`);
            if(saved) data = JSON.parse(saved);
            refresh();
        }

        function refresh() {
            document.getElementById('score-val').textContent = Math.floor(data.score).toLocaleString();
            document.getElementById('pwr-cost').textContent = data.pwrCost.toLocaleString();
            document.getElementById('auto-cost').textContent = data.autoCost.toLocaleString();
            document.getElementById('buy-pwr').disabled = data.score < data.pwrCost;
            document.getElementById('buy-auto').disabled = data.score < data.autoCost;

            let idx = Math.floor(data.score / 500);
            let code = (idx < codes.length) ? codes[idx] : codes[Math.floor(Math.random() * codes.length)];
            document.getElementById('country-flag').src = `https://flagpedia.net/data/flags/w580/${code}.png`;
            document.getElementById('location-name').textContent = code.toUpperCase();
        }

        document.getElementById('ball').addEventListener('click', (e) => {
            data.score += data.power;
            sfx_click.currentTime = 0; sfx_click.play();
            spawnPopup(e.clientX, e.clientY, data.power);
            refresh(); save();
        });

        document.getElementById('buy-pwr').addEventListener('click', () => {
            if(data.score >= data.pwrCost) {
                data.score -= data.pwrCost;
                data.power++;
                data.pwrCost = Math.round(data.pwrCost * 1.5);
                refresh(); save();
            }
        });

        document.getElementById('buy-auto').addEventListener('click', () => {
            if(data.score >= data.autoCost) {
                data.score -= data.autoCost;
                data.auto += 10;
                data.autoCost = Math.round(data.autoCost * 1.7);
                refresh(); save();
            }
        });

        function spawnPopup(x, y, val) {
            const p = document.createElement('div');
            p.className = 'popup';
            p.style.left = x + 'px'; p.style.top = y + 'px';
            p.innerText = `+$${val}`;
            document.body.appendChild(p);
            setTimeout(() => p.remove(), 600);
        }

        setInterval(() => {
            if(data.auto > 0) {
                data.score += (data.auto * data.power) / 5;
                refresh();
            }
        }, 200);

        function toggleBabyMode() {
            const baby = document.getElementById('baby-version');
            baby.style.display = (baby.style.display === 'flex') ? 'none' : 'flex';
        }

        function resetAll() { if(confirm("Erase all progress?")) { localStorage.clear(); location.reload(); } }

        load();
    </script>
</body>
</html>
