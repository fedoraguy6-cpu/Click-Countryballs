<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Click Countryballs</title>
    <style>
        :root { --panel: #1e293b; --bg: #090e1a; --gold: #fbbf24; }
        body {
            margin: 0; display: flex; height: 100vh;
            background: var(--bg); color: white;
            font-family: 'Segoe UI', sans-serif; overflow: hidden; user-select: none;
        }

        /* Sidebar & Layout */
        .sidebar {
            width: 300px; background: rgba(0,0,0,0.6);
            border-right: 3px solid #334155; padding: 20px;
            display: flex; flex-direction: column; gap: 15px;
        }
        .main-game {
            flex-grow: 1; display: flex; flex-direction: column;
            align-items: center; justify-content: center; position: relative;
        }

        /* Animations */
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-12px); } }
        @keyframes blink { 0%, 90%, 100% { transform: scaleY(1); } 95% { transform: scaleY(0.1); } }

        /* The Ball */
        .ball-container {
            position: relative; width: 280px; height: 280px;
            animation: float 4s ease-in-out infinite;
            transition: transform 0.1s; cursor: pointer;
        }
        .ball-container:active { transform: scale(0.9); animation: none; }
        #country-flag {
            width: 100%; height: 100%; border-radius: 50%;
            border: 8px solid #fff; object-fit: cover;
            box-shadow: 0 0 50px rgba(0,0,0,0.8);
        }

        /* Eyes */
        .eyes { position: absolute; top: 38%; width: 100%; display: flex; justify-content: center; gap: 45px; }
        .eye { 
            width: 40px; height: 50px; background: white; 
            border-radius: 50%; border: 5px solid #000; animation: blink 5s infinite;
        }

        /* Shop UI */
        .shop-item {
            background: var(--panel); padding: 15px; border-radius: 12px;
            border: 1px solid #475569; position: relative;
        }
        .currency-text { color: var(--gold); font-weight: bold; }
        button {
            width: 100%; padding: 12px; border-radius: 8px; border: none;
            background: #10b981; color: white; font-weight: bold; cursor: pointer; margin-top: 10px;
        }
        button:disabled { background: #475569; opacity: 0.5; }

        /* Owner Panel */
        #owner-panel {
            position: absolute; top: 10%; background: #991b1b; padding: 20px;
            border-radius: 15px; display: none; z-index: 100; border: 4px solid white;
        }

        /* Popups */
        .popup {
            position: absolute; color: var(--gold); font-weight: 900;
            pointer-events: none; animation: popGo 0.8s forwards; font-size: 1.5rem;
        }
        @keyframes popGo { to { opacity: 0; transform: translateY(-120px) scale(1.5); } }

        .score-display { text-align: center; margin-bottom: 20px; }
        #location-name { cursor: help; font-size: 1.2rem; color: #64748b; }
    </style>
</head>
<body>

    <div id="owner-panel">
        <h3>OWNER PANEL</h3>
        <button onclick="cheat(1000)">+1,000 Countrybux</button>
        <button onclick="cheat(100000)">+100k Countrybux</button>
        <button onclick="resetAll()" style="background:black">Hard Reset</button>
        <button onclick="document.getElementById('owner-panel').style.display='none'">Close</button>
    </div>

    <div class="sidebar">
        <h2 style="margin:0">Shop</h2>
        
        <div class="shop-item">
            <strong>Click Strength</strong>
            <div>Lvl: <span id="pwr-lvl">1</span></div>
            <button id="buy-pwr">Upgrade (<span class="currency-text">$</span><span id="pwr-cost">15</span>)</button>
        </div>

        <div class="shop-item">
            <strong>Auto-Clickers</strong>
            <div>Workers: <span id="auto-lvl">0</span></div>
            <button id="buy-auto">Hire (<span class="currency-text">$</span><span id="auto-cost">50</span>)</button>
        </div>

        <div style="margin-top:auto">
            <small>SAVES</small>
            <div style="display:flex; gap:5px">
                <button onclick="changeSlot(1)" id="s1">1</button>
                <button onclick="changeSlot(2)" id="s2">2</button>
                <button onclick="changeSlot(3)" id="s3">3</button>
            </div>
        </div>
    </div>

    <div class="main-game">
        <div class="score-display">
            <div id="location-name" onclick="showOwner()">USA</div>
            <div style="font-size: 4rem; font-weight: 900; color: var(--gold);">
                <span id="score-val">0</span> <small style="font-size: 1.5rem">CB</small>
            </div>
        </div>

        <div class="ball-container" id="ball">
            <img id="country-flag" src="https://flagpedia.net/data/flags/w580/us.png">
            <div class="eyes">
                <div class="eye"></div>
                <div class="eye"></div>
            </div>
        </div>
    </div>

    <script>
        let currentSlot = 1;
        let data = { score: 0, power: 1, pwrCost: 15, auto: 0, autoCost: 50 };

        // Massive Country/State List
        const locations = [
            {n:"USA", u:"us"}, {n:"UK", u:"gb"}, {n:"Germany", u:"de"}, {n:"France", u:"fr"}, 
            {n:"Japan", u:"jp"}, {n:"Russia", u:"ru"}, {n:"Texas", u:"us-tx"}, {n:"Canada", u:"ca"},
            {n:"Italy", u:"it"}, {n:"Brazil", u:"br"}, {n:"Poland", u:"pl"}, {n:"Ukraine", u:"ua"},
            {n:"Mexico", u:"mx"}, {n:"Spain", u:"es"}, {n:"California", u:"us-ca"}, {n:"China", u:"cn"},
            {n:"Australia", u:"au"}, {n:"S. Korea", u:"kr"}, {n:"Turkey", u:"tr"}, {n:"Sweden", u:"se"}
        ];

        function save() { localStorage.setItem(`cb_v3_slot_${currentSlot}`, JSON.stringify(data)); }
        
        function changeSlot(n) {
            currentSlot = n;
            const saved = localStorage.getItem(`cb_v3_slot_${currentSlot}`);
            data = saved ? JSON.parse(saved) : { score: 0, power: 1, pwrCost: 15, auto: 0, autoCost: 50 };
            document.querySelectorAll('[id^="s"]').forEach((b, i) => b.style.background = (i+1)===n ? '#3b82f6' : '#334155');
            refresh();
        }

        function refresh() {
            document.getElementById('score-val').textContent = Math.floor(data.score);
            document.getElementById('pwr-lvl').textContent = data.power;
            document.getElementById('pwr-cost').textContent = data.pwrCost;
            document.getElementById('buy-pwr').disabled = data.score < data.pwrCost;
            
            document.getElementById('auto-lvl').textContent = data.auto;
            document.getElementById('auto-cost').textContent = data.autoCost;
            document.getElementById('buy-auto').disabled = data.score < data.autoCost;

            // Unlock new countries every 250 Countrybux
            let idx = Math.min(Math.floor(data.score / 250), locations.length - 1);
            document.getElementById('country-flag').src = `https://flagpedia.net/data/flags/w580/${locations[idx].u}.png`;
            document.getElementById('location-name').textContent = locations[idx].n;
        }

        document.getElementById('ball').addEventListener('click', (e) => {
            data.score += data.power;
            
            const p = document.createElement('div');
            p.className = 'popup';
            p.style.left = e.clientX + 'px'; p.style.top = e.clientY + 'px';
            p.innerText = `+$${data.power}`;
            document.body.appendChild(p);
            setTimeout(() => p.remove(), 800);
            
            refresh(); save();
        });

        document.getElementById('buy-pwr').addEventListener('click', () => {
            if(data.score >= data.pwrCost) {
                data.score -= data.pwrCost;
                data.power++;
                data.pwrCost = Math.round(data.pwrCost * 1.8);
                refresh(); save();
            }
        });

        document.getElementById('buy-auto').addEventListener('click', () => {
            if(data.score >= data.autoCost) {
                data.score -= data.autoCost;
                data.auto++;
                data.autoCost = Math.round(data.autoCost * 2);
                refresh(); save();
            }
        });

        // Auto-Clicker loop
        setInterval(() => { if(data.auto > 0) { data.score += (data.auto * 0.5); refresh(); save(); } }, 1000);

        // Owner Panel Logic
        function showOwner() { document.getElementById('owner-panel').style.display = 'block'; }
        function cheat(amt) { data.score += amt; refresh(); save(); }
        function resetAll() { if(confirm("Erase EVERYTHING?")) { localStorage.clear(); location.reload(); } }

        changeSlot(1);
    </script>
</body>
</html>
